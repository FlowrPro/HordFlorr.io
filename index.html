<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Moborr.io</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <canvas id="game" tabindex="0"></canvas>

  <!-- Title / login screen -->
  <div id="titleScreen" aria-hidden="false">
    <h1>Moborr.io</h1>

    <div id="loginBox" role="dialog" aria-label="Login">
      <input id="username" type="text" placeholder="Enter a display name" maxlength="24" />
      <button id="playButton" type="button">Play</button>
    </div>

    <!-- Class selection: choose one of three starter classes -->
    <div id="classSelection" class="classSelection" aria-label="Choose your class">
      <label class="classOption">
        <input type="radio" name="class" value="warrior" checked />
        <div class="classCard">
          <div class="classTitle">Warrior</div>
          <div class="classDesc">Tanky melee. High HP.</div>
        </div>
      </label>
      <label class="classOption">
        <input type="radio" name="class" value="ranger" />
        <div class="classCard">
          <div class="classTitle">Ranger</div>
          <div class="classDesc">Ranged single-target.</div>
        </div>
      </label>
      <label class="classOption">
        <input type="radio" name="class" value="mage" />
        <div class="classCard">
          <div class="classTitle">Mage</div>
          <div class="classDesc">AoE caster. Lower HP.</div>
        </div>
      </label>
    </div>

    <div class="titleHint">Use keyboard, mouse or click-to-move (toggle in settings)</div>
  </div>

  <!-- Loading screen -->
  <div id="loadingScreen" aria-hidden="true" role="status" aria-live="polite">
    <div class="loadingBox">
      <div id="loadingPlayer" class="loadingPlayer" aria-hidden="true">
        <div class="eye left"><div class="pupil"></div></div>
        <div class="eye right"><div class="pupil"></div></div>
      </div>
      <div id="loadingText" class="loadingText">Loading…</div>
      <div id="loadingSub" class="loadingSub">Preparing the world</div>
      <div id="loadingPlayerName" class="loadingPlayerName"></div>
    </div>
  </div>

  <!-- Mode Selection Screen -->
  <div id="modeSelectScreen" aria-hidden="true" style="display:none;">
    <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; gap:40px;">
      <h1 style="font-size:56px; color:#ffd54a; text-shadow:0 3px 8px rgba(0,0,0,0.7); margin:0;">Game Modes</h1>
      
      <button id="ffaButton" type="button" style="
        font-size:24px;
        padding:16px 40px;
        border-radius:10px;
        border:none;
        background:#1e90ff;
        color:#fff;
        cursor:pointer;
        box-shadow:0 8px 24px rgba(30,144,255,0.35);
        transition:all 0.2s ease;
      ">
        Free For All (FFA)
      </button>
      
      <small style="color:rgba(255,255,255,0.8); margin-top:20px;">More modes coming soon...</small>
    </div>
  </div>

  <!-- Queue Screen -->
  <div id="queueScreen" aria-hidden="true" style="display:none;">
    <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; gap:20px; padding:20px;">
      <h1 style="font-size:48px; color:#ffd54a; text-shadow:0 3px 8px rgba(0,0,0,0.7); margin:0;">FFA Queue</h1>
      
      <div style="font-size:20px; color:#fff; margin-bottom:20px;">
        Players in Queue: <strong id="queueCount">?/10</strong>
      </div>
      
      <div id="queuePlayerList" style="
        background:rgba(0,0,0,0.3);
        border-radius:10px;
        padding:20px;
        max-height:300px;
        overflow-y:auto;
        width:100%;
        max-width:500px;
        min-height:150px;
      ">
        <div style="color:rgba(255,255,255,0.7); text-align:center;">Loading players...</div>
      </div>
      
      <button id="cancelQueueBtn" type="button" style="
        font-size:16px;
        padding:10px 20px;
        border-radius:8px;
        border:none;
        background:#c04;
        color:#fff;
        cursor:pointer;
        margin-top:20px;
      ">
        Cancel Queue
      </button>
    </div>
  </div>

  <!-- Countdown Screen -->
  <div id="countdownScreen" aria-hidden="true" style="display:none;">
    <div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; gap:30px; padding:20px;">
      <h1 style="font-size:48px; color:#ffd54a; text-shadow:0 3px 8px rgba(0,0,0,0.7); margin:0;">Match Starting</h1>
      
      <div style="font-size:32px; color:#1e90ff; font-weight:700;" id="countdownTimer">2:00</div>
      
      <div style="font-size:18px; color:#fff; margin-bottom:10px;">
        Players Joined: <strong id="countdownPlayerCount">0/10</strong>
      </div>
      
      <div id="countdownPlayerList" style="
        background:rgba(0,0,0,0.3);
        border-radius:10px;
        padding:20px;
        max-height:300px;
        overflow-y:auto;
        width:100%;
        max-width:500px;
        min-height:150px;
      ">
        <div style="color:rgba(255,255,255,0.7); text-align:center;">Loading players...</div>
      </div>
    </div>
  </div>

  <!-- Chat panel (non-persistent) -->
  <div id="chatPanel" aria-live="polite" aria-atomic="false">
    <div id="chatLog" role="log" aria-relevant="additions"></div>
    <div id="chatForm" role="form">
      <input id="chatInput" type="text" placeholder="Say something..." maxlength="240" />
      <button id="chatSend" type="button" aria-label="Send">➤</button>
    </div>
  </div>

  <!-- Settings button -->
  <button id="settingsBtn" aria-expanded="false" title="Settings">⚙</button>

  <!-- Settings panel -->
  <div id="settingsPanel" aria-hidden="true">
    <div class="settingsHeader">
      <div class="settingsTitle">Settings</div>
      <button id="settingsClose" class="closeBtn" title="Close">✕</button>
    </div>

    <div class="tabs" role="tablist" aria-label="Settings Tabs">
      <button class="tabButton active" data-tab="controls" role="tab" aria-selected="true">Controls</button>
      <button class="tabButton" data-tab="game" role="tab" aria-selected="false">Game</button>
      <button class="tabButton" data-tab="graphics" role="tab" aria-selected="false">Graphics</button>
    </div>

    <div class="tabContents">
      <div class="tabContent" data-name="controls">
        <div class="settingRow">
          <input id="keyboardMovement" type="checkbox" />
          <label for="keyboardMovement">Keyboard movement (WASD / Arrows)</label>
        </div>
        <div class="settingRow">
          <input id="mouseMovement" type="checkbox" />
          <label for="mouseMovement">Mouse movement (face cursor)</label>
        </div>
        <div class="settingRow">
          <input id="clickMovement" type="checkbox" />
          <label for="clickMovement">Click-to-move</label>
        </div>
      </div>

      <div class="tabContent hidden" data-name="game">
        <div class="settingRow">
          <input id="showCoordinates" type="checkbox" />
          <label for="showCoordinates">Show coordinates</label>
        </div>
        <div class="settingRow">
          <small style="color:#444">Gameplay options (more to come)</small>
        </div>
      </div>

      <div class="tabContent hidden" data-name="graphics">
        <div class="settingRow">
          <label for="graphicsQuality">Graphics quality</label>
          <select id="graphicsQuality">
            <option value="low">Low</option>
            <option value="medium" selected>Medium</option>
            <option value="high">High</option>
          </select>
        </div>
        <div class="settingRow">
          <small style="color:#444">Adjust details to improve performance on slower devices.</small>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="main.js"></script>
</body>
</html>
